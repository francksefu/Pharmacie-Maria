<!DOCTYPE html>
<html>
<head>
    <title>RNN Example</title>
    <!-- Inclure TensorFlow.js via le CDN -->
    <script src="./jsfile/tfs.min.js"></script>
</head>
<body>
    <script>
 // Importer TensorFlow.js
//import * as tf from '@tensorflow/tfjs-node';

// Générer des données de vente synthétiques
const sales = [8, 7, 5, 3, 1, 1, 3, 13, 2, 1, 5, 5, 2, 4, 3, 2, 1, 1, 1, 2, 8, 8, 1, 2, 3, 2, 3, 1, 2, 2, 3, 1, 2, 2, 25, 3, 8, 2, 1, 1, 1, 1, 3, 5, 1, 1, 1, 1, 1, 1, 4, 1, 1, 3, 3, 1, 3, 1, 2, 6, 3, 10, 1, 2, 6, 5, 1, 1, 2, 8, 3, 1, 15, 6, 1, 3, 3, 4, 1, 1, 1, 6, 1, 1, 10, 3, 10, 4, 1, 2, 1, 1, 3, 5, 1, 1, 1, 2, 2, 1, 4, 3, 2, 1, 1, 2, 1, 1, 4, 5, 3, 2, 1, 1, 8, 3, 3, 3, 2, 2, 2, 3, 3, 1, 5, 3, 3, 8, 2, 1, 1, 1, 2, 5, 5, 1, 1, 1, 3, 1, 1, 7, 1, 1, 2, 7, 2, 1, 2, 1, 4, 2, 5, 3, 1, 1, 3, 1, 1, 1, 1, 1, 5, 4, 1, 2, 5, 2, 1, 4, 3, 1, 1, 1, 1, 1, 7, 3, 3, 5, 10, 5, 4, 1, 10, 1, 1, 1, 1, 3, 5, 6, 3, 1, 1, 5, 5, 4, 3, 2, 3, 1, 2, 3, 1, 2, 6, 4, 1, 1];
const salesData = [];
for (let i = 0; i < 100; i++) {
  salesData.push(sales[i]);
}

// Préparer les données
const sequenceLength = 10;
const dataX = [];
const dataY = [];

for (let i = 0; i < salesData.length - sequenceLength; i++) {
  const inputSequence = salesData.slice(i, i + sequenceLength);
  const outputValue = salesData[i + sequenceLength];
  dataX.push(inputSequence);
  dataY.push(outputValue);
}

// Convertir les données en tensors
const xs = tf.tensor3d(dataX.map(seq => seq.map(val => [val])), [dataX.length, sequenceLength, 1]);
const ys = tf.tensor1d(dataY);

// Créer un modèle RNN simple
const model = tf.sequential();
model.add(tf.layers.lstm({ units: 50, inputShape: [sequenceLength, 1] }));
model.add(tf.layers.dense({ units: 1 }));

// Compiler le modèle
model.compile({ loss: 'meanSquaredError', optimizer: 'adam' });

// Entraîner le modèle
model.fit(xs, ys, { epochs: 50 }).then(() => {
  // Faire une prédiction
  const inputSequence = salesData.slice(90, 100); // Utiliser les 10 dernières valeurs pour prédire la prochaine
  const inputTensor = tf.tensor3d([inputSequence.map(val => [val])], [1, sequenceLength, 1]);
  const prediction = model.predict(inputTensor);
  const predictedValue = prediction.dataSync()[0];

  console.log('Prédiction de la prochaine vente :', predictedValue);
});


    </script>
</body>
</html>
